<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>JulManBOT • Connexion</title>

        <!-- adl integration -->
        <script async defer src="https://julmanbot.github.io/adl.js"></script>
        <!-- login integration -->
        <script async defer src="connection.js"></script>

        <!-- Main script -->
        <script>
            document.querySelector('script').addEventListener('load', function () {
                document.querySelectorAll('script')[1].addEventListener('load', function () {
                    const search = new URLSearchParams(location.search);

                    if (search.has("client_id")) {
                        if (search.has("target")) {
                            try {
                                login(new DiscordBot(`${search.get("client_id")}`), new DiscordClient(), `${search.get("target")}`);
                            } catch {
                                window.location.reload();
                            }
                        } else {
                            document.querySelector('p').outerHTML = "Erreur : <code>Missing \"target\" args</code>";
                        }
                    } else {
                        document.querySelector('p').outerHTML = "Erreur : <code>Missing \"client_id\" args</code>";
                    }
                });
            });
        </script>
    </head>

    <body>
        <p id="error-view">
            Si vous n'êtes pas rediriger, veuillez rafraichir la page (<code>Ctrl+R</code> ou <code>Cmd+R</code> ou
            <code>F5</code>)
        </p>
    </body>

</html>